(function(e,t,n,r,i){function s(e,t,n,r){r=r instanceof Array?r:[];var i={};for(var s=0;s<r.length;s++){i[r[s]]=true}var o=function(e){this.element=e};o.prototype=n;e.fn[t]=function(){var n=arguments;var r=this;this.each(function(){var s=e(this);var u=s.data("plugin-"+t);if(!u){u=new o(s);s.data("plugin-"+t,u);if(u._init){u._init.apply(u,n)}}else if(typeof n[0]=="string"&&n[0].charAt(0)!="_"&&typeof u[n[0]]=="function"){var a=Array.prototype.slice.call(n,1);var f=u[n[0]].apply(u,a);if(n[0]in i){r=f}}});return r}}var o=200,u=200,a=10;var f={stateStyles:{fill:"#333",stroke:"#666","stroke-width":1,"stroke-linejoin":"round",scale:[1,1]},stateHoverStyles:{fill:"#33c",stroke:"#000",scale:[1.1,1.1]},stateHoverAnimation:500,stateSpecificStyles:{},stateSpecificHoverStyles:{},click:null,mouseover:null,mouseout:null,clickState:{},mouseoverState:{},mouseoutState:{},showLabels:true,labelWidth:20,labelHeight:15,labelGap:6,labelRadius:3,labelBackingStyles:{fill:"#333",stroke:"#666","stroke-width":1,"stroke-linejoin":"round",scale:[1,1]},labelBackingHoverStyles:{fill:"#33c",stroke:"#000"},stateSpecificLabelBackingStyles:{},stateSpecificLabelBackingHoverStyles:{},labelTextStyles:{fill:"#fff",stroke:"none","font-weight":300,"stroke-width":0,"font-size":"10px"},labelTextHoverStyles:{},stateSpecificLabelTextStyles:{},stateSpecificLabelTextHoverStyles:{}};var l={_init:function(t){this.options={};e.extend(this.options,f,t);var n=this.element.width();var i=this.element.height();var s=this.element.width()/o;var l=this.element.height()/u;this.scale=Math.min(s,l);this.labelAreaWidth=Math.ceil(a/this.scale);var c=o+Math.max(0,this.labelAreaWidth-a);this.paper=r(this.element.get(0),c,u);this.paper.setSize(n,i);this.paper.setViewBox(210,400,c,u,false);this.stateHitAreas={};this.stateShapes={};this.topShape=null;this._initCreateStates();this.labelShapes={};this.labelTexts={};this.labelHitAreas={};if(this.options.showLabels){this._initCreateLabels()}},_initCreateStates:function(){var t=this.options.stateStyles;var n=this.paper;var r={Hawaii:"M 489.22227,570.1512 L 487.79598,571.58127 L 484.9358,569.43804 L 477.79291,566.58164 L 476.35523,564.43461 L 475.64209,563.0083 L 476.35523,551.57514 L 471.3556,539.42506 L 468.49541,536.57245 L 466.35217,533.71607 L 467.06911,531.56523 L 471.3556,527.28255 L 476.35523,520.8566 L 476.35523,518.00023 L 472.7857,512.9968 L 472.06874,510.1404 L 472.7857,507.27641 L 474.21198,506.56328 L 478.50227,507.27641 L 479.92857,509.41966 L 486.36209,512.28364 L 494.2257,513.70994 L 502.79867,517.28707 L 508.51525,520.8566 L 511.37165,524.42615 L 512.08478,530.14651 L 515.65434,529.42958 L 517.08442,531.56523 L 517.08442,534.42921 L 520.65777,537.28561 L 525.6574,539.42506 L 524.22729,542.28523 L 516.37127,549.42811 L 509.94155,553.00905 L 504.22497,553.7222 L 497.79524,558.71802 L 494.2257,560.85748 L 489.22227,570.1512z",Honolulu:"M 388.48988,461.55139 L 385.6259,463.70602 L 385.6259,462.98907 L 381.33943,464.41536 L 377.76608,462.27212 L 370.62321,462.98907 L 367.76302,463.70602 L 366.33672,460.12508 L 364.18968,458.69879 L 363.48033,456.55934 L 361.3333,454.41231 L 361.3333,452.26906 L 359.19005,450.84656 L 366.33672,449.40889 L 369.91006,444.41683 L 372.05331,442.98294 L 374.19275,443.6923 L 377.76608,450.12202 L 378.47924,450.12202 L 379.19239,451.55592 L 378.47924,452.9822 L 379.19239,455.12166 L 382.05257,457.27249 L 382.76571,455.12166 L 384.19581,455.12166 L 384.19581,457.27249 L 385.6259,457.98943 L 386.33906,460.84583 L 388.48988,461.55139z",Kalawao:"M 419.92537,466.55481 L 417.78213,465.84546 L 422.78177,466.55481 L 423.49112,467.98111 L 422.78177,467.98111 L 421.35167,467.27176 L 420.63093,467.27176 L 419.92537,466.55481z",Kauai:"M 303.46576,421.55052 L 308.46161,421.55052 L 310.61242,422.98061 L 311.31798,425.12007 L 311.31798,426.55395 L 309.8879,430.1197 L 309.8879,434.40998 L 307.03151,437.26257 L 304.89585,438.70024 L 297.75296,437.97952 L 294.89278,435.12693 L 290.6063,433.69303 L 289.17622,432.26674 L 289.17622,430.1197 L 291.32325,427.2633 L 298.46991,421.55052 L 303.46576,421.55052 M 269.88703,444.41683 L 269.17387,443.6923 L 269.88703,439.40961 L 274.17351,436.54942 L 274.89046,434.40998 L 277.03371,434.40998 L 276.32055,439.40961 L 272.74721,440.8397 L 270.60397,444.41683 L 269.88703,444.41683z",Maui:"M 420.63093,467.27176 L 421.35167,467.27176 L 422.78177,467.98111 L 423.49112,467.98111 L 422.78177,466.55481 L 429.20389,465.12852 L 432.06409,465.84546 L 430.63399,468.70564 L 426.34752,471.55823 L 424.20428,471.55823 L 415.63888,470.13574 L 405.63581,470.84511 L 404.91509,470.84511 L 407.06592,465.12852 L 407.77905,465.12852 L 417.78213,465.84546 L 419.92537,466.55481 L 420.63093,467.27176 M 437.77687,472.27139 L 439.92011,472.98834 L 443.49345,478.70492 L 450.63632,475.13537 L 454.92281,475.84852 L 454.92281,476.56167 L 460.63938,480.13881 L 465.63902,481.5651 L 466.35217,482.99139 L 466.35217,485.84398 L 463.49577,488.70418 L 459.92244,490.13427 L 452.77956,492.99825 L 447.77614,492.99825 L 446.34604,492.27752 L 444.91974,483.70834 L 442.78031,482.99139 L 441.3502,484.41391 L 437.06371,482.27445 L 434.20733,479.41427 L 433.49039,476.56167 L 434.92048,473.70148 L 435.63364,472.27139 L 437.77687,472.27139 M 419.20843,478.70492 L 424.20428,478.70492 L 427.06445,480.84815 L 428.49076,482.99139 L 427.77381,485.84398 L 421.35167,487.99482 L 420.63093,485.13464 L 419.92537,482.99139 L 417.06897,480.13881 L 417.06897,479.41427 L 419.20843,478.70492 M 440.63706,492.99825 L 441.3502,493.70761 L 442.06336,496.56401 L 436.34676,497.99409 L 434.20733,497.27336 L 435.63364,495.14149 L 440.63706,492.99825z"};var i={};for(var s in r){i={};if(this.options.stateSpecificStyles[s]){e.extend(i,t,this.options.stateSpecificStyles[s])}else{i=t}this.stateShapes[s]=n.path(r[s]).attr(i);this.topShape=this.stateShapes[s];this.stateHitAreas[s]=n.path(r[s]).attr({fill:"#000","stroke-width":0,opacity:0,cursor:"pointer"});this.stateHitAreas[s].node.dataState=s}this._onClickProxy=e.proxy(this,"_onClick");this._onMouseOverProxy=e.proxy(this,"_onMouseOver"),this._onMouseOutProxy=e.proxy(this,"_onMouseOut");for(var s in this.stateHitAreas){this.stateHitAreas[s].toFront();e(this.stateHitAreas[s].node).bind("mouseout",this._onMouseOutProxy);e(this.stateHitAreas[s].node).bind("click",this._onClickProxy);e(this.stateHitAreas[s].node).bind("mouseover",this._onMouseOverProxy)}},_initCreateLabels:function(){var t=this.paper;var n=[];var r=860;var i=220;var s=this.options.labelWidth;var o=this.options.labelHeight;var u=this.options.labelGap;var a=this.options.labelRadius;var f=s/this.scale;var l=o/this.scale;var c=(s+u)/this.scale;var h=(o+u)/this.scale*.5;var p=a/this.scale;var d=this.options.labelBackingStyles;var v=this.options.labelTextStyles;var m={};for(var g=0,y,b,w;g<n.length;++g){w=n[g];y=(g+1)%2*c+r;b=g*h+i;m={};if(this.options.stateSpecificLabelBackingStyles[w]){e.extend(m,d,this.options.stateSpecificLabelBackingStyles[w])}else{m=d}this.labelShapes[w]=t.rect(y,b,f,l,p).attr(m);m={};if(this.options.stateSpecificLabelTextStyles[w]){e.extend(m,v,this.options.stateSpecificLabelTextStyles[w])}else{e.extend(m,v)}if(m["font-size"]){m["font-size"]=parseInt(m["font-size"])/this.scale+"px"}this.labelTexts[w]=t.text(y+f/2,b+l/2,w).attr(m);this.labelHitAreas[w]=t.rect(y,b,f,l,p).attr({fill:"#000","stroke-width":0,opacity:0,cursor:"pointer"});this.labelHitAreas[w].node.dataState=w}for(var w in this.labelHitAreas){this.labelHitAreas[w].toFront();e(this.labelHitAreas[w].node).bind("mouseout",this._onMouseOutProxy);e(this.labelHitAreas[w].node).bind("click",this._onClickProxy);e(this.labelHitAreas[w].node).bind("mouseover",this._onMouseOverProxy)}},_getStateFromEvent:function(e){var t=e.target&&e.target.dataState||e.dataState;return this._getState(t)},_getState:function(e){var t=this.stateShapes[e];var n=this.stateHitAreas[e];var r=this.labelShapes[e];var i=this.labelTexts[e];var s=this.labelHitAreas[e];return{shape:t,hitArea:n,name:e,labelBacking:r,labelText:i,labelHitArea:s}},_onMouseOut:function(e){var t=this._getStateFromEvent(e);if(!t.hitArea){return}return!this._triggerEvent("mouseout",e,t)},_defaultMouseOutAction:function(t){var n={};if(this.options.stateSpecificStyles[t.name]){e.extend(n,this.options.stateStyles,this.options.stateSpecificStyles[t.name])}else{n=this.options.stateStyles}t.shape.animate(n,this.options.stateHoverAnimation);if(t.labelBacking){var n={};if(this.options.stateSpecificLabelBackingStyles[t.name]){e.extend(n,this.options.labelBackingStyles,this.options.stateSpecificLabelBackingStyles[t.name])}else{n=this.options.labelBackingStyles}t.labelBacking.animate(n,this.options.stateHoverAnimation)}},_onClick:function(e){var t=this._getStateFromEvent(e);if(!t.hitArea){return}return!this._triggerEvent("click",e,t)},_onMouseOver:function(e){var t=this._getStateFromEvent(e);if(!t.hitArea){return}return!this._triggerEvent("mouseover",e,t)},_defaultMouseOverAction:function(t){this.bringShapeToFront(t.shape);this.paper.safari();var n={};if(this.options.stateSpecificHoverStyles[t.name]){e.extend(n,this.options.stateHoverStyles,this.options.stateSpecificHoverStyles[t.name])}else{n=this.options.stateHoverStyles}t.shape.animate(n,this.options.stateHoverAnimation);if(t.labelBacking){var n={};if(this.options.stateSpecificLabelBackingHoverStyles[t.name]){e.extend(n,this.options.labelBackingHoverStyles,this.options.stateSpecificLabelBackingHoverStyles[t.name])}else{n=this.options.labelBackingHoverStyles}t.labelBacking.animate(n,this.options.stateHoverAnimation)}},_triggerEvent:function(t,n,r){var i=r.name;var s=false;var o=e.Event("usmap"+t+i);o.originalEvent=n;if(this.options[t+"State"][i]){s=this.options[t+"State"][i](o,r)===false}if(o.isPropagationStopped()){this.element.trigger(o,[r]);s=s||o.isDefaultPrevented()}if(!o.isPropagationStopped()){var u=e.Event("usmap"+t);u.originalEvent=n;if(this.options[t]){s=this.options[t](u,r)===false||s}if(!u.isPropagationStopped()){this.element.trigger(u,[r]);s=s||u.isDefaultPrevented()}}if(!s){switch(t){case"mouseover":this._defaultMouseOverAction(r);break;case"mouseout":this._defaultMouseOutAction(r);break}}return!s},trigger:function(e,t,n){t=t.replace("usmap","");e=e.toUpperCase();var r=this._getState(e);this._triggerEvent(t,n,r)},bringShapeToFront:function(e){if(this.topShape){e.insertAfter(this.topShape)}this.topShape=e}};var c=[];s(e,"usmap",l,c)})(jQuery,document,window,Raphael)
